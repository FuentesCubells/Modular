<section class="w-full flex flex-col items-center justify-center gap-10">

  <header class="w-full flex flex-col gap-2">
    <h1 class="text-4xl font-bold">Housing</h1>
    <p class="">Gestión completa del inventario de habitaciones y suites</p>
  </header>


  <body class="w-full">
    <article class="w-full flex flex-col gap-3" *ngIf="houses.length > 0">
      <p class="text-sm text-gray-500 uppercase">{{houses.length}} alojamientos encontrados</p>
      <ul class="w-full grid grid-cols-1 md:grid-cols-2 gap-4 auto-rows-auto">
        <li *ngFor="let house of houses">
          <crm-housing-card [house]="house" (houseSelected)="getHouseSelected($event)"></crm-housing-card>
        </li>
      </ul>
    </article>
  </body>

  <ng-container *ngIf="houseSelected">
    <aside class="absolute top-0 right-0  w-1/2 h-full flex flex-col justify-between border-l border-gray-300 bg-white">

      <div class="p-5 flex flex-row items-center justify-between border-b border-gray-30">
        <span>Detalles del alojamiento</span>
        <i class="pi pi-times text-gray-500"></i>
      </div>
      <!-- Images  -->
      <div class="p-5">
        <figure class="p-3 w-full min-h-[250px] bg-gray-400">
          <span class="p-1" [ngClass]="{
                    'text-green-700 bg-green-200': houseSelected?.status === 'Disponible',
                    'text-red-700 bg-red-200': houseSelected?.status === 'Ocupado',
                    'text-yellow-700 bg-yellow-200': houseSelected?.status === 'Mantenimiento',
                    'text-blue-700 bg-blue-200': houseSelected?.status === 'Limpieza'
                }">
            {{ houseSelected?.status }}
          </span>

          <img />
        </figure>
      </div>

      <!-- Info -->
      <div class="h-full overflow-scroll">
        <header class="p-3 flex flex-col gap-0">
          <h3 class="font-bold">{{houseSelected?.title}}</h3>
          <h3 class="font-light uppercase text-gray-500">{{houseSelected?.type}}</h3>
        </header>

        <body class="p-3 w-full flex flex-col gap-5">
          <!-- Description -->
          <article class="w-full flex flex-col justify-center gap-2">
            <p class="text-gray-500">Descripción</p>
            <p>{{houseSelected?.description}}</p>
            <div class="flex items-center space-x-1">
              <i class="pi pi-map-marker text-grey-500"></i>
              <p class="font-light text-gray-500">{{ houseSelected?.location }}</p>
            </div>
          </article>


          <!-- Especifications -->

          <article class="pt-2 pb-2 w-full flex flex-col justify-center gap-2 border-t border-b border-gray-300">
            <p class=" text-gray-500">Especifications</p>
            <div class="w-full flex flex-row justify-center gap-2">
              <div class="p-2 flex flex-1 flex-col items-center justify-between space-x-1 bg-gray-200">
                <div class="flex flex-row items-center justify-center gap-1">
                  <i class="pi pi-user text-grey-500"></i>
                  <p>{{ houseSelected?.max_people }}</p>
                </div>
                <p class="text-xs text-gray-500 uppercase">Húespedes</p>
              </div>

              <div class="p-2 flex flex-1  flex-col items-center space-x-1 bg-gray-200">
                <div class="flex flex-row items-center justify-center gap-1">
                  <i class="pi pi-home text-grey-500"></i>
                  <p>{{ houseSelected?.rooms }}</p>
                </div>
                <p class="text-xs text-gray-500 uppercase">Habitaciones</p>
              </div>

              <div class="p-2 flex  flex-1  flex-col items-center space-x-1 bg-gray-200">
                <div class="flex flex-row items-center justify-center gap-1">
                  <i class="pi pi-home text-grey-500"></i>
                  <p>{{ houseSelected?.bathrooms }}</p>
                </div>
                <p class="text-xs text-gray-500 uppercase">Baños</p>
              </div>
            </div>

          </article>

          <article class="p-2 flex flex-col items-start gap-2">
            <span class="font-semibold text-gray-500">Servicios:</span>

            <div class="flex flex-row items-center">

              <div class="flex items-center space-x-1">
                <i class="pi pi-wifi text-grey-500"></i>
              </div>


              <div class="flex items-center space-x-1">
                <i class="pi pi-utensils text-grey-500"></i>
              </div>


              <div class="flex items-center space-x-1">
                <i class="pi pi-water text-grey-500"></i>
              </div>
            </div>
          </article>

          <article class="w-full pt-3 flex flex-row items-center justify-between border-t">
            <p class="text-xs text-gray-500 font-bold text-transform:uppercase uppercase">Precio por noche</p>
            <p class="text-xl">{{houseSelected?.price_per_night}} Eur</p>
          </article>
        </body>
      </div>

      <div class="p-5">
        <button class="p-2 w-full border border-gray-700">Editar alojamiento</button>
      </div>
    </aside>
  </ng-container>


  <div class="p-4 border rounded shadow-md">
  <h2 class="text-xl font-bold mb-3">Detalle de alojamiento</h2>

  <div class="space-y-3">
    <!-- Título -->
    <div>
      <label class="font-semibold">Título:</label>
      <span *ngIf="!isEditing">{{ houseSelected?.title }}</span>
      <input
        *ngIf="isEditing"
        type="text"
        [(ngModel)]="houseSelected!.title"
        class="border p-1 rounded w-full"
      />
    </div>

    <!-- Descripción -->
    <div>
      <label class="font-semibold">Descripción:</label>
      <span *ngIf="!isEditing">{{ houseSelected?.description }}</span>
      <textarea
        *ngIf="isEditing"
        [(ngModel)]="houseSelected!.description"
        class="border p-1 rounded w-full"
      ></textarea>
    </div>

    <!-- Habitaciones -->
    <div>
      <label class="font-semibold">Habitaciones:</label>
      <span *ngIf="!isEditing">{{ houseSelected?.rooms }}</span>
      <input
        *ngIf="isEditing"
        type="number"
        [(ngModel)]="houseSelected!.rooms"
        class="border p-1 rounded w-24"
      />
    </div>
  </div>

  <!-- Botones -->
  <div class="mt-4 flex gap-2">
    <button
      (click)="toggleEdit()"
      class="px-3 py-1 bg-blue-500 text-white rounded"
    >
      {{ isEditing ? 'Cancelar' : 'Editar' }}
    </button>

    <button
      *ngIf="isEditing"
      (click)="saveChanges()"
      class="px-3 py-1 bg-green-500 text-white rounded"
    >
      Guardar
    </button>
  </div>
</div>

</section>